diff a/gnocchi/tests/test_rest.py b/gnocchi/tests/test_rest.py	(rejected hunks)
@@ -195,6 +195,34 @@ class EntityTest(RestTest):
         self.assertEqual({'2013-01-01T12:00:00.000000': 12345.2},
                          result)
 
+    def test_get_measure_aggregation_granularity(self):
+        result = self.app.post_json("/v1/entity",
+                                    params={"archives": [(1, 50), (5, 10)]})
+        entity = jsonutils.loads(result.body)
+        self.app.post_json("/v1/entity/%s/measures" % entity['id'],
+                           params=[{"timestamp": '2013-01-01 12:00:01',
+                                    "value": 123.2},
+                                   {"timestamp": '2013-01-01 12:00:03',
+                                    "value": 12345.2},
+                                   {"timestamp": '2013-01-01 12:00:02',
+                                    "value": 1234.2}])
+        path = "/v1/entity/%s/measures?aggregation=max&granularity=%d"
+        ret = self.app.get(path % (entity['id'], 5))
+        self.assertEqual(ret.status_code, 200)
+        result = jsonutils.loads(ret.body)
+        self.assertEqual({'2013-01-01T12:00:00.000000': 12345.2},
+                         result)
+        ret = self.app.get(path % (entity['id'], 1))
+        self.assertEqual(ret.status_code, 200)
+        result = jsonutils.loads(ret.body)
+        self.assertEqual(123.2, result.get('2013-01-01T12:00:01.000000'))
+        self.assertEqual(1234.2, result.get('2013-01-01T12:00:02.000000'))
+        self.assertEqual(12345.2, result.get('2013-01-01T12:00:03.000000'))
+        ret = self.app.get(path % (entity['id'], 60))
+        self.assertEqual(ret.status_code, 200)
+        result = jsonutils.loads(ret.body)
+        self.assertEqual({}, result)
+
 
 class ResourceTest(RestTest):
 
